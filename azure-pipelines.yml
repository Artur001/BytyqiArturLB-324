trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.11'

- script: |
    python -m pip install --upgrade pip
    pip install -r requirements.txt
    pip install black pylint pytest
  displayName: Install deps

- script: black --check .
  displayName: Black

- script: pylint app.py test_app.py || true
  displayName: Pylint

- script: pytest -v
  displayName: Pytest
